:root{
  --bg:#0b0b0b;
  --bg-2:#121212;
  --card:#111;
  --ink:#fff;
  --muted:#cfcfcf;

  /* Paleta */
  --brand:#f1c40f;
  --brand-2:#ffd94a;
  --stroke:#1f1f1f;

  --radius:12px;
  --shadow:0 10px 30px rgba(0,0,0,.35);

  /* Tipos y escalas (compacto) */
  --filter-fs: 13px;                 /* << etiqueta y contenido del filtro al MISMO tamaño */
  --fs-0: 12px;                      /* texto pequeño / pct */
  --fs-1: 13px;                      /* etiquetas KPI */
  --fs-2: 14px;                      /* valores KPI */

  /* KPI compact */
  --kpi-pad: 8px;
  --kpi-gap: 6px;
  --kpi-icon: 18px;
  --kpi-minh: 78px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg);
  color:var(--ink);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow-x:hidden;
}

.container{width:92%;max-width:1200px;margin-inline:auto}

/* ====== HEADER ====== */
.main-header{
  position:sticky;top:0;z-index:1000;background:#000;
  border-bottom:1px solid var(--stroke);box-shadow:0 2px 12px rgba(0,0,0,.4);
}
.header-content{display:flex;align-items:center;justify-content:space-between;gap:16px;min-height:64px}
.logo{display:inline-flex;align-items:center;justify-content:center;max-height:48px}
.logo img, img.logo{display:block;max-height:48px;height:auto;max-width:200px;width:auto;object-fit:contain}
.main-header nav a, .main-header .nav a, .main-header a[href]{
  color:var(--muted); text-decoration:none; font-weight:600; letter-spacing:.2px;
  padding:10px 6px; display:inline-block;
}
.main-header nav a:hover, .main-header .nav a:hover{ color:#fff }
.main-header .active, .main-header a[aria-current="page"]{ color:var(--brand) }

/* ====== SECTIONS / CARDS ====== */
.section{padding:44px 0}
.card{
  background:var(--card);
  padding:14px;
  border-radius:var(--radius);
  border:1px solid var(--stroke);
  box-shadow:var(--shadow);
}

/* ====== FILTROS ====== */
.filters{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin:0 0 12px }
.filters .control{
  position:relative;
  display:inline-flex; gap:8px; align-items:center; background:#0f0f0f;
  border:1px solid #242424; border-radius:10px; padding:7px 9px;
}
.filters label{
  color: var(--muted); font-weight:700; letter-spacing:.2px;
  font-size:var(--filter-fs); line-height:1.1; white-space:nowrap;
}
/* OBLIGAMOS a que el contenido del filtro tenga el mismo tamaño que la etiqueta */
.filters select,
.dd-toggle{
  background: #141414; color: #fff; border:1px solid #242424; border-radius:8px;
  font-size:var(--filter-fs) !important; line-height:1.1; font-weight:700;  /* << igual que label */
  padding:6px 9px; min-width:200px; -webkit-appearance:none; appearance:none; outline:none;
}
.filters .control select{ background:transparent; border:0; padding:0; min-width:200px }

.loading{ display:flex; align-items:center; gap:8px; color: var(--muted); font-size:var(--fs-0) }
.dotloader{ width:9px; height:9px; border-radius:50%; background: var(--brand); animation:pulse .9s infinite alternate ease-in-out }
@keyframes pulse{ from{transform:scale(.9);opacity:.7} to{transform:scale(1.15);opacity:1} }

/* Dropdown Canal */
.dd{ min-width: 280px }
.dd-panel{
  position:absolute; top:calc(100% + 6px); left:0; background:#0f0f0f; border:1px solid #242424; border-radius:10px;
  padding:10px; box-shadow:0 10px 24px rgba(0,0,0,.45); width:320px; max-height:320px; overflow:auto; z-index:10;
}
.dd-actions{ display:flex; gap:8px; margin-bottom:8px }
.btn-mini{
  background:#1a1a1a; color:#fff; border:1px solid #2a2a2a; border-radius:8px; padding:6px 8px; font-size:.85rem; cursor:pointer;
}
.btn-mini:hover{ background:#202020 }
.dd-list{ display:grid; grid-template-columns:1fr 1fr; gap:6px }
.dd-item{
  display:flex; align-items:center; gap:8px; padding:6px 8px; background:#111; border:1px solid #222; border-radius:8px;
  font-size:var(--fs-0);
}
.dd-item input{ accent-color: var(--brand); width:16px; height:16px }

/* ====== KPI: UNA SOLA LÍNEA (7 columnas fijas) ====== */
.kpi-grid{
  display:grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap:8px;
  align-items:stretch;
  width:100%;
}

/* Tarjeta compacta y uniforme */
.kpi{
  background:linear-gradient(180deg,#101010,#0c0c0c);
  border-radius:10px;
  border:1px solid #222;
  padding:var(--kpi-pad);
  display:grid; grid-template-rows:auto 1fr; gap:var(--kpi-gap);
  box-shadow:0 5px 14px rgba(0,0,0,.32), inset 0 0 0 1px rgba(255,255,255,.02);
  transition:transform .16s ease, box-shadow .16s ease, border-color .16s ease;
  min-width:0; min-height:var(--kpi-minh);
}
.kpi:hover{ transform:translateY(-1px); border-color:#2a2a2a; box-shadow:0 8px 18px rgba(0,0,0,.42), inset 0 0 0 1px rgba(255,255,255,.04) }
.kpi-head{ display:flex; align-items:center; gap:6px; min-width:0 }
.kpi-icon{
  width:var(--kpi-icon); height:var(--kpi-icon); flex:0 0 var(--kpi-icon); border-radius:7px;
  background:linear-gradient(135deg,#ffd86b 0%, #f1c40f 50%, #ffb300 100%);
  display:inline-flex; align-items:center; justify-content:center; box-shadow:0 2px 7px rgba(241,196,15,.35)
}
.kpi-icon::before{
  content:""; width:calc(var(--kpi-icon) - 6px); height:calc(var(--kpi-icon) - 6px);
  display:block; background-size:contain; background-repeat:no-repeat; background-position:center;
  filter:drop-shadow(0 1px 1px rgba(0,0,0,.35))
}
.kpi-label{
  color:#eaeaea; font-weight:800; letter-spacing:.1px; font-size:var(--fs-1);
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
.kpi-value{
  font-size:var(--fs-2); font-weight:800; color:#fff; display:flex; align-items:end; gap:6px;
  min-height:1.7em; line-height:1.05;
}
.cell-stat{ display:flex; flex-direction:column; align-items:flex-end; gap:6px; justify-content:center; }
.cell-top{ display:flex; gap:8px; align-items:baseline; width:100%; justify-content:space-between; }
.cell-top .pct{ color:#fff; font-weight:700; font-size:var(--fs-0) }

/* Barra “carretera” más compacta */
.road-progress{
  width:100%; height:8px; border-radius:9999px; background:#ECECEC;
  box-shadow:inset 0 0 0 2px rgba(255,255,255,.9), 0 1px 2px rgba(0,0,0,.25);
  position:relative; overflow:hidden;
}
.road-progress .road-bar{
  position:relative; height:100%; margin:0; width:0%;
  background:linear-gradient(90deg, var(--brand), var(--brand-2));
  border-radius:inherit; filter:saturate(.92) brightness(.98);
  box-shadow:inset 0 1px 1px rgba(255,255,255,.35), inset 0 -1px 1px rgba(0,0,0,.15);
  transition:width .45s ease;
}
.road-progress .road-bar::before{
  content:""; position:absolute; left:6px; right:18px; top:50%; height:2px; transform:translateY(-50%);
  background:repeating-linear-gradient(90deg, rgba(255,255,255,.95) 0 16px, rgba(255,255,255,0) 16px 32px);
  border-radius:2px; pointer-events:none;
}
.road-progress .road-bar::after{
  content:""; position:absolute; right:4px; top:50%; transform:translateY(-50%); width:10px; height:10px;
  background-repeat:no-repeat; background-size:contain; filter:drop-shadow(0 1px 1px rgba(0,0,0,.35));
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'><path d='M3 7c0-1.1.9-2 2-2h8v8H3V7zM15 7h3.8c.3 0 .6.1.8.4l2.3 3.1c.1.2.2.4.2.7V13h-7V7zM7 18.5A1.5 1.5 0 1 1 7 15.5a1.5 1.5 0 0 1 0 3zM18 18.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM2 14h20v1.5c0 .3-.2.5-.5.5H21a3 3 0 0 1-6 0H9a3 3 0 0 1-6 0H2.5c-.3 0-.5-.2-.5-.5V14z'/></svg>");
}
.road-progress .road-bar[data-small="1"]::after{ display:none }

/* ====== Iconos (SVGs a color) ====== */
.kpi--clientes .kpi-icon::before{background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='white' d='M16 11c1.66 0 3-1.34 3-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3z'/><path fill='white' d='M8 11c1.66 0 3-1.34 3-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3z'/><path fill='white' d='M0 18v1h16v-1c0-2.33-4.67-3.5-8-3.5S0 15.67 0 18z'/></svg>")}
.kpi--vehiculos .kpi-icon::before{background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='white' d='M3 7c0-1.1.9-2 2-2h8v8H3V7zM15 7h3.8c.3 0 .6.1.8.4l2.3 3.1c.1.2.2.4.2.7V13h-7V7z'/><circle cx='7' cy='18.5' r='1.5' fill='white'/><circle cx='18' cy='18.5' r='1.5' fill='white'/></svg>")}
.kpi--kg .kpi-icon::before{background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='white' d='M5 20h14l-3-12H8L5 20zm7-14a3 3 0 00-3 3h6a3 3 0 00-3-3z'/></svg>")}
.kpi--valor .kpi-icon::before{background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='white' d='M12 3C7.03 3 3 7.03 3 12h2a7 7 0 1114 0h2c0-4.97-4.03-9-9-9z'/><path fill='white' d='M11 8h2v3h3v2h-3v3h-2v-3H8v-2h3z'/></svg>")}
.kpi--kgveh .kpi-icon::before{background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><circle cx='12' cy='12' r='9' fill='white'/><path d='M13 7h-2v6h6v-2h-4z' fill='%230b0b0b'/></svg>")}
.kpi--kgcli .kpi-icon::before{background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='white' d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4a4 4 0 100 8z'/><path fill='white' d='M4 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4z'/></svg>")}
.kpi--cliveh .kpi-icon::before{background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='white' d='M5 16h14v2H5zM5 8h14v2H5zM5 12h14v2H5z'/></svg>")}

/* ====== TABLAS ====== */
.table-wrap{ overflow-x:auto; border-radius:12px; border:1px solid var(--stroke); background:var(--card) }
table{ width:100%; border-collapse:collapse; min-width:820px; font-size:var(--fs-0) }
thead th{
  text-align:left; font-weight:800; color:var(--brand); background:#0e0e0e;
  padding:8px 8px; border-bottom:2px solid var(--brand); position:sticky; top:0; z-index:1; letter-spacing:.2px
}
tbody td{ padding:8px; border-bottom:1px solid #1a1a1a; color:var(--muted); vertical-align:middle }
tbody tr:hover{ background:#0f0f0f }
tfoot td{ padding:8px; border-top:2px solid var(--brand); font-weight:800; color:#fff; background:#0e0e0e }
.num{ text-align:right; white-space:nowrap }
.muted{ color:var(--muted) }
.small{ font-size: var(--fs-0); }

/* ====== MAPA ====== */
.map-title{ margin:0 0 8px; font-size:14px; color:#eaeaea; font-weight:800; letter-spacing:.2px }
.heatmap{ width:100%; height:420px; border-radius:10px; overflow:hidden; }
.leaflet-container{ background:#0b0b0b; outline:none; }

/* ====== Responsive suave ====== */
@media (max-width: 1200px){ .logo, .logo img, img.logo{max-height:44px} }
@media (max-width: 992px){ .container{width:94%} }
@media (max-width: 768px){
  .logo, .logo img, img.logo{max-height:40px}
  table{ min-width:740px; }
}

/* Seguridad: evita sobreflujo en KPI */
.kpi *{ min-width:0 }
